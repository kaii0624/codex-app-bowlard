<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>App Advent Hub</title>
  <style>
    :root {
      --bg: #0a1a2f;
      --bg-soft: #10233d;
      --card: #122b4c;
      --ink: #f3f7ff;
      --muted: #9db0cc;
      --line: #2d4a73;
      --accent: #ffcb45;
      --accent-strong: #ff9f1c;
      --today: #38d39f;
      --shadow: 0 18px 45px rgba(0, 0, 0, 0.35);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      color: var(--ink);
      font-family: "Hiragino Sans", "Yu Gothic", "Noto Sans JP", sans-serif;
      background:
        radial-gradient(90rem 70rem at 80% -10%, #244f83 0%, transparent 55%),
        radial-gradient(65rem 45rem at -10% 90%, #17395f 0%, transparent 60%),
        var(--bg);
    }

    .wrap {
      max-width: 980px;
      margin: 0 auto;
      padding: 28px 20px 36px;
    }

    .hero {
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0.01));
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 22px;
      padding: 24px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(5px);
    }

    .hero h1 {
      margin: 0;
      font-size: clamp(1.4rem, 3.8vw, 2rem);
      letter-spacing: 0.02em;
    }

    .hero p {
      margin: 12px 0 0;
      color: var(--muted);
      line-height: 1.65;
      font-size: 0.98rem;
    }

    .calendar {
      margin-top: 18px;
      background: var(--bg-soft);
      border: 1px solid var(--line);
      border-radius: 22px;
      padding: 18px;
      box-shadow: var(--shadow);
    }

    .calendar-head {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 14px;
    }

    .calendar-title {
      margin: 0;
      font-size: 1.1rem;
      letter-spacing: 0.01em;
    }

    .btns {
      display: flex;
      gap: 8px;
    }

    button {
      border: 1px solid var(--line);
      color: var(--ink);
      background: #173458;
      border-radius: 10px;
      padding: 7px 11px;
      cursor: pointer;
      font-size: 0.9rem;
    }

    button:hover { background: #1b3f6a; }

    .week {
      display: grid;
      grid-template-columns: repeat(7, minmax(0, 1fr));
      gap: 7px;
      margin-bottom: 8px;
      color: var(--muted);
      font-size: 0.82rem;
      text-align: center;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(7, minmax(0, 1fr));
      gap: 8px;
    }

    .cell,
    .blank {
      min-height: 108px;
      border-radius: 14px;
    }

    .blank {
      border: 1px dashed rgba(157, 176, 204, 0.22);
      opacity: 0.5;
    }

    .cell {
      background: var(--card);
      border: 1px solid var(--line);
      padding: 9px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      transition: transform 0.14s ease, box-shadow 0.14s ease;
    }

    .cell:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.3);
    }

    .date-num {
      font-weight: 700;
      font-size: 1rem;
    }

    .is-today {
      border-color: var(--today);
      box-shadow: 0 0 0 1px rgba(56, 211, 159, 0.35) inset;
    }

    .is-today.has-entry {
      background: linear-gradient(145deg, rgba(56, 211, 159, 0.22), rgba(255, 203, 69, 0.16)), var(--card);
      box-shadow:
        0 0 0 1px rgba(56, 211, 159, 0.55) inset,
        0 0 28px rgba(56, 211, 159, 0.35);
      animation: pulse 1.8s ease-in-out infinite;
    }

    @keyframes pulse {
      0% { box-shadow: 0 0 0 1px rgba(56, 211, 159, 0.5) inset, 0 0 18px rgba(56, 211, 159, 0.25); }
      50% { box-shadow: 0 0 0 1px rgba(255, 203, 69, 0.7) inset, 0 0 28px rgba(255, 203, 69, 0.35); }
      100% { box-shadow: 0 0 0 1px rgba(56, 211, 159, 0.5) inset, 0 0 18px rgba(56, 211, 159, 0.25); }
    }

    .entry-link {
      margin-top: auto;
      display: inline-block;
      background: linear-gradient(120deg, var(--accent), var(--accent-strong));
      color: #212121;
      text-decoration: none;
      border-radius: 999px;
      font-weight: 700;
      text-align: center;
      padding: 8px;
      font-size: 0.86rem;
    }

    .entry-link:hover { filter: brightness(1.04); }

    .badge {
      display: inline-block;
      width: fit-content;
      padding: 3px 7px;
      border-radius: 999px;
      font-size: 0.72rem;
      font-weight: 700;
      background: rgba(56, 211, 159, 0.18);
      color: #8ce9c9;
      border: 1px solid rgba(56, 211, 159, 0.5);
    }

    .hint {
      margin-top: 12px;
      color: var(--muted);
      font-size: 0.9rem;
      line-height: 1.6;
    }

    @media (max-width: 760px) {
      .calendar { padding: 14px; }
      .cell, .blank { min-height: 95px; }
      .calendar-head { flex-direction: column; align-items: stretch; }
      .btns { justify-content: space-between; }
      button { flex: 1; }
    }
  </style>
</head>
<body>
  <main class="wrap">
    <section class="hero">
      <h1>App Advent Hub</h1>
      <p>
        毎日つくるアプリを、日付ごとに並べるハブページです。<br>
        今日の枠は光り、公開済みアプリがあればそのまま起動できます。
      </p>
    </section>

    <section class="calendar" aria-label="アドベントカレンダー">
      <div class="calendar-head">
        <h2 class="calendar-title" id="calendarTitle"></h2>
        <div class="btns">
          <button type="button" id="prevMonth">前の月</button>
          <button type="button" id="goToday">今日</button>
          <button type="button" id="nextMonth">次の月</button>
        </div>
      </div>

      <div class="week" aria-hidden="true">
        <div>日</div><div>月</div><div>火</div><div>水</div><div>木</div><div>金</div><div>土</div>
      </div>
      <div class="grid" id="calendarGrid"></div>

      <p class="hint">
        追加方法: <code>entries</code> に <code>YYYY-MM-DD</code> の日付とリンクを1件ずつ追加すると、該当日セルにボタンが出ます。
      </p>
    </section>
  </main>

  <script>
    const today = new Date();

    const entries = [
      {
        date: "2026-02-12",
        title: "Bowlard",
        href: "./apps/bowlard/"
      }
    ];

    const monthLabel = document.getElementById("calendarTitle");
    const grid = document.getElementById("calendarGrid");
    const prevBtn = document.getElementById("prevMonth");
    const nextBtn = document.getElementById("nextMonth");
    const todayBtn = document.getElementById("goToday");

    let viewYear = today.getFullYear();
    let viewMonth = today.getMonth();

    const entryMap = new Map(entries.map((entry) => [entry.date, entry]));

    function pad2(value) {
      return String(value).padStart(2, "0");
    }

    function dateKey(year, monthIndex, day) {
      return `${year}-${pad2(monthIndex + 1)}-${pad2(day)}`;
    }

    function renderCalendar(year, monthIndex) {
      grid.innerHTML = "";
      monthLabel.textContent = `${year}年 ${monthIndex + 1}月`;

      const firstDay = new Date(year, monthIndex, 1);
      const startWeekday = firstDay.getDay();
      const daysInMonth = new Date(year, monthIndex + 1, 0).getDate();

      for (let i = 0; i < startWeekday; i += 1) {
        const blank = document.createElement("div");
        blank.className = "blank";
        grid.appendChild(blank);
      }

      for (let day = 1; day <= daysInMonth; day += 1) {
        const key = dateKey(year, monthIndex, day);
        const entry = entryMap.get(key);

        const cell = document.createElement("article");
        cell.className = "cell";

        const num = document.createElement("div");
        num.className = "date-num";
        num.textContent = day;
        cell.appendChild(num);

        const isToday =
          year === today.getFullYear() &&
          monthIndex === today.getMonth() &&
          day === today.getDate();

        if (isToday) {
          cell.classList.add("is-today");
          const badge = document.createElement("span");
          badge.className = "badge";
          badge.textContent = "TODAY";
          cell.appendChild(badge);
        }

        if (entry) {
          const link = document.createElement("a");
          link.className = "entry-link";
          link.href = entry.href;
          link.textContent = entry.title;
          link.setAttribute("aria-label", `${key} ${entry.title} を開く`);
          cell.appendChild(link);

          if (isToday) {
            cell.classList.add("has-entry");
          }
        }

        grid.appendChild(cell);
      }
    }

    prevBtn.addEventListener("click", () => {
      viewMonth -= 1;
      if (viewMonth < 0) {
        viewMonth = 11;
        viewYear -= 1;
      }
      renderCalendar(viewYear, viewMonth);
    });

    nextBtn.addEventListener("click", () => {
      viewMonth += 1;
      if (viewMonth > 11) {
        viewMonth = 0;
        viewYear += 1;
      }
      renderCalendar(viewYear, viewMonth);
    });

    todayBtn.addEventListener("click", () => {
      viewYear = today.getFullYear();
      viewMonth = today.getMonth();
      renderCalendar(viewYear, viewMonth);
    });

    renderCalendar(viewYear, viewMonth);
  </script>
</body>
</html>
