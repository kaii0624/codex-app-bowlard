<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>App Advent Hub</title>
  <style>
    :root {
      --bg: #0a1a2f;
      --bg-soft: #10233d;
      --card: #122b4c;
      --ink: #f3f7ff;
      --muted: #9db0cc;
      --line: #2d4a73;
      --accent: #ffcb45;
      --accent-strong: #ff9f1c;
      --today: #38d39f;
      --shadow: 0 18px 45px rgba(0, 0, 0, 0.35);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      color: var(--ink);
      font-family: "Hiragino Sans", "Yu Gothic", "Noto Sans JP", sans-serif;
      background:
        radial-gradient(90rem 70rem at 80% -10%, #244f83 0%, transparent 55%),
        radial-gradient(65rem 45rem at -10% 90%, #17395f 0%, transparent 60%),
        var(--bg);
    }

    .wrap {
      max-width: 980px;
      margin: 0 auto;
      padding: 28px 20px 36px;
    }

    .hero {
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0.01));
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 22px;
      padding: 24px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(5px);
    }

    .hero h1 {
      margin: 0;
      font-size: clamp(1.4rem, 3.8vw, 2rem);
      letter-spacing: 0.02em;
    }

    .hero p {
      margin: 12px 0 0;
      color: var(--muted);
      line-height: 1.65;
      font-size: 0.98rem;
    }

    .calendar {
      margin-top: 18px;
      background: var(--bg-soft);
      border: 1px solid var(--line);
      border-radius: 22px;
      padding: 18px;
      box-shadow: var(--shadow);
    }

    .calendar-head {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 12px;
    }

    .calendar-title {
      margin: 0;
      font-size: 1.12rem;
      letter-spacing: 0.01em;
    }

    .btns {
      display: flex;
      gap: 8px;
    }

    button {
      border: 1px solid var(--line);
      color: var(--ink);
      background: #173458;
      border-radius: 10px;
      padding: 7px 11px;
      cursor: pointer;
      font-size: 0.9rem;
    }

    button:hover { background: #1b3f6a; }

    .list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .day-row {
      display: grid;
      grid-template-columns: 130px 1fr;
      gap: 10px;
      align-items: center;
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 10px;
      transition: transform 0.14s ease, box-shadow 0.14s ease;
    }

    .day-row:hover {
      transform: translateY(-1px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
    }

    .day-row.today {
      border-color: var(--today);
      box-shadow: 0 0 0 1px rgba(56, 211, 159, 0.38) inset;
      background: linear-gradient(145deg, rgba(56, 211, 159, 0.18), rgba(255, 203, 69, 0.1)), var(--card);
    }

    .day-meta {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .date-main {
      font-size: 1rem;
      font-weight: 700;
      line-height: 1.1;
    }

    .date-sub {
      font-size: 0.8rem;
      color: var(--muted);
    }

    .badge {
      display: inline-block;
      width: fit-content;
      padding: 3px 7px;
      border-radius: 999px;
      font-size: 0.7rem;
      font-weight: 700;
      background: rgba(56, 211, 159, 0.18);
      color: #8ce9c9;
      border: 1px solid rgba(56, 211, 159, 0.5);
    }

    .day-actions {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      align-items: center;
    }

    .entry-link {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-height: 36px;
      max-width: 100%;
      background: linear-gradient(120deg, var(--accent), var(--accent-strong));
      color: #212121;
      text-decoration: none;
      border-radius: 999px;
      font-weight: 700;
      text-align: center;
      padding: 8px 12px;
      font-size: 0.86rem;
      line-height: 1.2;
      white-space: nowrap;
    }

    .entry-link:hover { filter: brightness(1.04); }

    .empty {
      color: var(--muted);
      font-size: 0.82rem;
    }

    .hint {
      margin-top: 12px;
      color: var(--muted);
      font-size: 0.9rem;
      line-height: 1.6;
    }

    @media (max-width: 760px) {
      .calendar { padding: 14px; }
      .calendar-head { flex-direction: column; align-items: stretch; }
      .btns { justify-content: space-between; }
      button { flex: 1; }
      .day-row {
        grid-template-columns: 1fr;
        gap: 8px;
      }
      .entry-link {
        font-size: 0.8rem;
        padding: 7px 10px;
      }
    }
  </style>
</head>
<body>
  <main class="wrap">
    <section class="hero">
      <h1>App Advent Hub</h1>
      <p>
        毎日つくるアプリを、日付ごとに並べるハブページです。<br>
        カレンダーではなく1日1行で表示し、同じ日に複数アプリがあればボタンを並べます。
      </p>
    </section>

    <section class="calendar" aria-label="日別アプリ一覧">
      <div class="calendar-head">
        <h2 class="calendar-title" id="calendarTitle"></h2>
        <div class="btns">
          <button type="button" id="prevMonth">前の月</button>
          <button type="button" id="goToday">今日</button>
          <button type="button" id="nextMonth">次の月</button>
        </div>
      </div>

      <div class="list" id="dayList"></div>

      <p class="hint">
        追加方法: <code>entries</code> に <code>date</code> が同じデータを複数追加すると、同じ日の行にボタンが増えます。
      </p>
    </section>
  </main>

  <script>
    const today = new Date();

    const entries = [
      {
        date: "2026-02-12",
        title: "Brick Blast",
        href: "./apps/2026-02-12-brick-blast/"
      },
      {
        date: "2026-02-12",
        title: "ねんねトリオ 90日スケジューラー",
        href: "./apps/2026-02-12-baby-care-3line-scheduler/"
      },
      {
        date: "2026-02-12",
        title: "Bowlard",
        href: "./apps/bowlard/"
      },
      {
        date: "2026-02-12",
        title: "動物タワーバトル",
        href: "./apps/2026-02-12-animal-tower-battle/"
      }
    ];

    const monthLabel = document.getElementById("calendarTitle");
    const dayList = document.getElementById("dayList");
    const prevBtn = document.getElementById("prevMonth");
    const nextBtn = document.getElementById("nextMonth");
    const todayBtn = document.getElementById("goToday");

    let viewYear = today.getFullYear();
    let viewMonth = today.getMonth();

    const weekNames = ["日", "月", "火", "水", "木", "金", "土"];

    const groupedEntries = entries.reduce((map, entry) => {
      const bucket = map.get(entry.date) ?? [];
      bucket.push(entry);
      map.set(entry.date, bucket);
      return map;
    }, new Map());

    function pad2(value) {
      return String(value).padStart(2, "0");
    }

    function dateKey(year, monthIndex, day) {
      return `${year}-${pad2(monthIndex + 1)}-${pad2(day)}`;
    }

    function renderList(year, monthIndex) {
      dayList.innerHTML = "";
      monthLabel.textContent = `${year}年 ${monthIndex + 1}月`;

      const daysInMonth = new Date(year, monthIndex + 1, 0).getDate();

      for (let day = 1; day <= daysInMonth; day += 1) {
        const key = dateKey(year, monthIndex, day);
        const dayEntries = groupedEntries.get(key) ?? [];
        const weekDay = new Date(year, monthIndex, day).getDay();

        const row = document.createElement("article");
        row.className = "day-row";

        const isToday =
          year === today.getFullYear() &&
          monthIndex === today.getMonth() &&
          day === today.getDate();

        if (isToday) {
          row.classList.add("today");
        }

        const meta = document.createElement("div");
        meta.className = "day-meta";

        const main = document.createElement("div");
        main.className = "date-main";
        main.textContent = `${pad2(monthIndex + 1)}/${pad2(day)}`;
        meta.appendChild(main);

        const sub = document.createElement("div");
        sub.className = "date-sub";
        sub.textContent = `${key} (${weekNames[weekDay]})`;
        meta.appendChild(sub);

        if (isToday) {
          const badge = document.createElement("span");
          badge.className = "badge";
          badge.textContent = "TODAY";
          meta.appendChild(badge);
        }

        row.appendChild(meta);

        const actions = document.createElement("div");
        actions.className = "day-actions";

        if (dayEntries.length > 0) {
          for (const entry of dayEntries) {
            const link = document.createElement("a");
            link.className = "entry-link";
            link.href = entry.href;
            link.textContent = entry.title;
            link.setAttribute("aria-label", `${key} ${entry.title} を開く`);
            actions.appendChild(link);
          }
        } else {
          const empty = document.createElement("span");
          empty.className = "empty";
          empty.textContent = "未公開";
          actions.appendChild(empty);
        }

        row.appendChild(actions);
        dayList.appendChild(row);
      }
    }

    prevBtn.addEventListener("click", () => {
      viewMonth -= 1;
      if (viewMonth < 0) {
        viewMonth = 11;
        viewYear -= 1;
      }
      renderList(viewYear, viewMonth);
    });

    nextBtn.addEventListener("click", () => {
      viewMonth += 1;
      if (viewMonth > 11) {
        viewMonth = 0;
        viewYear += 1;
      }
      renderList(viewYear, viewMonth);
    });

    todayBtn.addEventListener("click", () => {
      viewYear = today.getFullYear();
      viewMonth = today.getMonth();
      renderList(viewYear, viewMonth);
    });

    renderList(viewYear, viewMonth);
  </script>
</body>
</html>
